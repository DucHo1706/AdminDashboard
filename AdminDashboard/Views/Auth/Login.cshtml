@model AdminDashboard.Models.Login.DangNhap
@{
    Layout = "~/Views/Shared/_Layout_User.cshtml";
    ViewData["Title"] = "Đăng nhập tài khoản";
}
<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"]</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

    <style>
        body {
            background: url('https://images.pexels.com/photos/209652/pexels-photo-209652.jpeg?cs=srgb&dl=pexels-samtingwong-209652.jpg&fm=jpg') no-repeat center center fixed;
            background-size: cover;
            height: 100vh;
            margin: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f8f9fa;
        }
        .login-container {
            max-width: 900px;
            margin: auto;
            background: rgba(255, 255, 255, 0.92);
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 0 20px rgba(0,0,0,0.3);
        }

        .header {
            background-color: #ff6200;
            color: white;
            padding: 12px;
            border-radius: 8px;
            margin-bottom: 25px;
            text-align: center;
        }

        .card {
            --p: 32px;
            --h-form: auto;
            --w-form: 380px;
            --input-px: 0.75rem;
            --input-py: 0.65rem;
            --submit-h: 38px;
            --space-y: 0.5rem;
            width: var(--w-form);
            height: var(--h-form);
            max-width: 100%;
            border-radius: 16px;
            background: white;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: space-evenly;
            flex-direction: column;
            overflow-y: auto;
            padding: var(--p);
            scrollbar-width: none;
            -webkit-overflow-scrolling: touch;
            -webkit-font-smoothing: antialiased;
            -webkit-user-select: none;
            user-select: none;
            font-family: "Trebuchet MS", "Lucida Sans Unicode", "Lucida Grande", "Lucida Sans", Arial, sans-serif;
        }

        .avatar {
            --sz-avatar: 166px;
            order: 0;
            width: var(--sz-avatar);
            min-width: var(--sz-avatar);
            max-width: var(--sz-avatar);
            height: var(--sz-avatar);
            min-height: var(--sz-avatar);
            max-height: var(--sz-avatar);
            border: 1px solid #707070;
            border-radius: 9999px;
            overflow: hidden;
            cursor: pointer;
            z-index: 2;
            perspective: 80px;
            position: relative;
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            --sz-svg: calc(var(--sz-avatar) - 10px);
        }

            .avatar svg {
                position: absolute;
                transition: transform 0.2s ease-in, opacity 0.1s;
                transform-origin: 50% 100%;
                height: var(--sz-svg);
                width: var(--sz-svg);
                pointer-events: none;
            }

                .avatar svg#monkey {
                    z-index: 1;
                }

                .avatar svg#monkey-hands {
                    z-index: 2;
                    transform-style: preserve-3d;
                    transform: translateY(calc(var(--sz-avatar) / 1.25)) rotateX(-21deg);
                    transition: transform 0.3s ease;
                }

            .avatar.hide-password svg#monkey-hands {
                transform: translateY(calc(var(--sz-avatar) / 25)) rotateX(0deg);
            }

            .avatar::before {
                content: "";
                border-radius: 45%;
                width: calc(var(--sz-svg) / 3.889);
                height: calc(var(--sz-svg) / 5.833);
                border: 0;
                border-bottom: calc(var(--sz-svg) * (4 / 100)) solid #3c302a;
                bottom: 20%;
                position: absolute;
                transition: all 0.2s ease;
                z-index: 3;
            }

            .avatar svg#monkey .monkey-eye-r,
            .avatar svg#monkey .monkey-eye-l {
                animation: blink 10s 1s infinite;
                transition: all 0.2s ease;
            }

        @@keyframes blink {
            0%, 2%, 4%, 26%, 28%, 71%, 73%, 100% {
                ry: 4.5;
                cy: 31.7;
            }

            1%, 3%, 27%, 72% {
                ry: 0.5;
                cy: 30;
            }
        }

        .form:focus-within ~ .avatar svg#monkey {
            animation: slick 3s ease infinite 1s;
            --center: rotateY(0deg);
            --left: rotateY(-4deg);
            --right: rotateY(4deg);
        }

        @@keyframes slick {
            0%, 100% {
                transform: var(--center);
            }

            33% {
                transform: var(--left);
            }

            66% {
                transform: var(--right);
            }
        }

        .form {
            order: 1;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: space-evenly;
            flex-direction: column;
            width: 100%;
        }

            .form .title {
                width: 100%;
                font-size: 1.5rem;
                font-weight: 600;
                margin-top: 0;
                margin-bottom: 1rem;
                padding-top: 0;
                padding-bottom: 1rem;
                color: rgba(0, 0, 0, 0.7);
                border-bottom: 2px solid rgba(0, 0, 0, 0.3);
            }

            .form .label_input {
                white-space: nowrap;
                font-size: 1rem;
                margin-top: calc(var(--space-y) / 2);
                color: rgba(0, 0, 0, 0.9);
                font-weight: 600;
                display: inline;
                text-align: left;
                margin-right: auto;
                position: relative;
                z-index: 99;
                -webkit-user-select: none;
                user-select: none;
            }

            .form .input {
                resize: vertical;
                background: white;
                border: 1px solid #8f8f8f;
                border-radius: 6px;
                outline: none;
                padding: var(--input-py) var(--input-px);
                font-size: 18px;
                width: 100%;
                color: #000000b3;
                margin: var(--space-y) 0;
                transition: all 0.25s ease;
            }

                .form .input:focus {
                    border: 1px solid #0969da;
                    outline: 0;
                    box-shadow: 0 0 0 2px #0969da;
                }

            .form .frg_pss {
                width: 100%;
                display: inline-flex;
                align-items: center;
            }

                .form .frg_pss a {
                    background-color: transparent;
                    cursor: pointer;
                    text-decoration: underline;
                    transition: color 0.25s ease;
                    color: #000000b3;
                    font-weight: 500;
                    float: right;
                }

                    .form .frg_pss a:hover {
                        color: #000;
                    }

            .form .submit {
                height: var(--submit-h);
                width: 100%;
                outline: none;
                cursor: pointer;
                background-color: #fff;
                background-image: linear-gradient(-180deg, rgba(255, 255, 255, 0.09) 0%, rgba(17, 17, 17, 0.04) 100%);
                border: 1px solid rgba(22, 22, 22, 0.2);
                font-weight: 500;
                letter-spacing: 0.25px;
                color: black;
                background-color: lightcoral;
                white-space: nowrap;
                overflow: hidden;
                text-overflow: ellipsis;
                font-size: 1rem;
                text-align: center;
                text-decoration: none;
                padding: 0.5rem 1rem;
                border-radius: 0.25rem;
                -webkit-appearance: button;
                appearance: button;
                margin: var(--space-y) 0 0;
            }

                .form .submit:hover {
                    background-image: linear-gradient(-180deg, rgba(255, 255, 255, 0.18) 0%, rgba(17, 17, 17, 0.08) 100%);
                    border: 1px solid rgba(22, 22, 22, 0.2);
                    color: yellow;
                    background-color: orangered;
                }

        .signin {
            text-align: center;
            font-size: 14px;
        }

            .signin a {
                color: #d30073;
                text-decoration: none;
            }

                .signin a:hover {
                    text-decoration: underline;
                }

        .password-container {
            position: relative;
            width: 100%;
        }

            .password-container .toggle-password {
                position: absolute;
                right: var(--input-px);
                top: 50%;
                transform: translateY(-50%);
                cursor: pointer;
                color: #4d4d4d;
                font-size: 14px;
                padding: 4px 8px;
                background: #fff;
                border-radius: 4px;
                transition: background-color 0.2s ease, color 0.2s ease;
                z-index: 100;
            }

                .password-container .toggle-password:hover {
                    background-color: #f2f2f2;
                    color: #262626;
                }

        .form .input#password-input {
            padding-right: calc(var(--input-px) + 60px);
        }

        .alert.alert-danger {
            margin-bottom: 1rem;
            padding: 0.75rem;
            font-size: 0.9rem;
            text-align: center;
        }

            .alert.alert-danger ul {
                list-style: none;
                padding: 0;
                margin: 0;
            }

                .alert.alert-danger ul li {
                    margin-bottom: 0.5rem;
                }

           .alert.alert-danger:empty {
                display: none;
            }

            #loading-overlay {
            position: fixed; /* Che toàn bộ màn hình */
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5); /* Nền mờ */
            display: none; /* Ẩn ban đầu */
            justify-content: center;
            align-items: center;
            z-index: 9999; /* Luôn ở trên cùng */
        }

        .loader {
            width: 84px;
            height: 84px;
            position: relative;
            overflow: hidden;
        }

        .loader:before, .loader:after {
            content: "";
            position: absolute;
            left: 50%;
            bottom: 0;
            width: 64px;
            height: 64px;
            border-radius: 50%;
            background: yellow; /* Bạn có thể đổi màu này */
            transform: translate(-50% , 100%) scale(0);
            animation: push_4051 2s infinite ease-in;
        }

        .loader:after {
            animation-delay: 1s;
        }

        @@keyframes push_4051 {
            0% {
                transform: translate(-50% , 100%) scale(1);
            }

            15%, 25% {
                transform: translate(-50% , 50%) scale(1);
            }

            50%, 75% {
                transform: translate(-50%, -30%) scale(0.5);
            }

            80%, 100% {
                transform: translate(-50%, -50%) scale(0);
            }
        }
    </style>
</head>
<body>
    <div class="login-container">
        <div class="header">
            <h4>Chúng tôi! <br />Cùng bạn trên mọi nẻo đường</h4>
        </div>
        <div class="row">
            <div class="col-md-6 d-flex justify-content-center align-items-center mb-4 mb-md-0">
                <img src="~/css/images/bus.png" class="img-fluid" style="max-height:260px;border-radius:15px; " alt="Bus" />
            </div>
            <div class="col-md-6">
                <div class="card">
                    <form asp-action="Login" method="post" novalidate class="form" id="login-form">
                        <div class="title text-center">Đăng nhập</div>

                        <div asp-validation-summary="ModelOnly" class="alert alert-danger" role="alert"></div>

                        <label asp-for="EmailOrPhone" class="label_input">Email hoặc Số điện thoại</label>
                        <input asp-for="EmailOrPhone" spellcheck="false" class="input" type="text" placeholder="Nhập email hoặc số điện thoại..." id="emailOrPhone" />
                        <span asp-validation-for="EmailOrPhone" class="text-danger small"></span>

                        <div class="frg_pss">
                            <label asp-for="MatKhau" class="label_input">Mật khẩu</label>
                            <a href="/Auth/ForgotPass">Quên mật khẩu?</a>
                        </div>
                        <div class="password-container">
                            <input asp-for="MatKhau" spellcheck="false" class="input" type="password" id="password-input" placeholder="Nhập mật khẩu..." />
                            <span class="toggle-password" onclick="togglePassword()">Hiện</span>
                        </div>
                        <span asp-validation-for="MatKhau" class="text-danger small"></span>

                        <button type="submit" class="submit btn">Đăng nhập</button>
                    </form>
                    <label for="blind-input" class="avatar">
                        <svg xmlns="http://www.w3.org/2000/svg" width="35" height="35" viewBox="0 0 64 64" id="monkey">
                            <ellipse cx="53.7" cy="33" rx="8.3" ry="8.2" fill="#89664c"></ellipse>
                            <ellipse cx="53.7" cy="33" rx="5.4" ry="5.4" fill="#ffc5d3"></ellipse>
                            <ellipse cx="10.2" cy="33" rx="8.2" ry="8.2" fill="#89664c"></ellipse>
                            <ellipse cx="10.2" cy="33" rx="5.4" ry="5.4" fill="#ffc5d3"></ellipse>
                            <g fill="#89664c">
                                <path d="m43.4 10.8c1.1-.6 1.9-.9 1.9-.9-3.2-1.1-6-1.8-8.5-2.1 1.3-1 2.1-1.3 2.1-1.3-20.4-2.9-30.1 9-30.1 19.5h46.4c-.7-7.4-4.8-12.4-11.8-15.2"></path>
                                <path d="m55.3 27.6c0-9.7-10.4-17.6-23.3-17.6s-23.3 7.9-23.3 17.6c0 2.3.6 4.4 1.6 6.4-1 2-1.6 4.2-1.6 6.4 0 9.7 10.4 17.6 23.3 17.6s23.3-7.9 23.3-17.6c0-2.3-.6-4.4-1.6-6.4 1-2 1.6-4.2 1.6-6.4"></path>
                            </g>
                            <path d="m52 28.2c0-16.9-20-6.1-20-6.1s-20-10.8-20 6.1c0 4.7 2.9 9 7.5 11.7-1.3 1.7-2.1 3.6-2.1 5.7 0 6.1 6.6 11 14.7 11s14.7-4.9 14.7-11c0-2.1-.8-4-2.1-5.7 4.4-2.7 7.3-7 7.3-11.7" fill="#e0ac7e"></path>
                            <g fill="#3b302a" class="monkey-eye-nose">
                                <path d="m35.1 38.7c0 1.1-.4 2.1-1 2.1-.6 0-1-.9-1-2.1 0-1.1.4-2.1 1-2.1.6.1 1 1 1 2.1"></path>
                                <path d="m30.9 38.7c0 1.1-.4 2.1-1 2.1-.6 0-1-.9-1-2.1 0-1.1.4-2.1 1-2.1.5.1 1 1 1 2.1"></path>
                                <ellipse cx="40.7" cy="31.7" rx="3.5" ry="4.5" class="monkey-eye-r"></ellipse>
                                <ellipse cx="23.3" cy="31.7" rx="3.5" ry="4.5" class="monkey-eye-l"></ellipse>
                            </g>
                        </svg>
                        <svg xmlns="http://www.w3.org/2000/svg" width="35" height="35" viewBox="0 0 64 64" id="monkey-hands">
                            <path fill="#89664C" d="M9.4,32.5L2.1,61.9H14c-1.6-7.7,4-21,4-21L9.4,32.5z"></path>
                            <path fill="#FFD6BB" d="M15.8,24.8c0,0,4.9-4.5,9.5-3.9c2.3,0.3-7.1,7.6-7.1,7.6s9.7-8.2,11.7-5.6c1.8,2.3-8.9,9.8-8.9,9.8 s10-8.1,9.6-4.6c-0.3,3.8-7.9,12.8-12.5,13.8C11.5,43.2,6.3,39,9.8,24.4C11.6,17,13.3,25.2,15.8,24.8"></path>
                            <path fill="#89664C" d="M54.8,32.5l7.3,29.4H50.2c1.6-7.7-4-21-4-21L54.8,32.5z"></path>
                            <path fill="#FFD6BB" d="M48.4,24.8c0,0-4.9-4.5-9.5-3.9c-2.3,0.3,7.1,7.6,7.1,7.6s-9.7-8.2-11.7-5.6c-1.8,2.3,8.9,9.8,8.9,9.8 s-10-8.1-9.7-4.6c0.4,3.8,8,12.8,12.6,13.8c6.6,1.3,11.8-2.9,8.3-17.5C52.6,17,50.9,25.2,48.4,24.8"></path>
                        </svg>
                    </label>
                </div>
                <div>
                    <p class="signin">Bạn chưa có tài khoản? <a href="/Auth/Register">Đăng ký</a></p>
                </div>
            </div>
        </div>
    </div>
    <div>

    </div>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        function togglePassword() {
            const passwordInput = document.getElementById("password-input");
            const toggleText = document.querySelector(".toggle-password");
            const avatar = document.querySelector(".avatar");

            if (passwordInput.type === "password") {
                passwordInput.type = "text";
                toggleText.textContent = "Ẩn";
                avatar.classList.remove("hide-password");
            } else {
                passwordInput.type = "password";
                toggleText.textContent = "Hiện";
                avatar.classList.add("hide-password");
            }
        }

        // làm mất thông báo lỗi khi focus vào khung nhập liệu trong trường hợp thông báo lỗi
        document.querySelectorAll('.form .input').forEach(input => {
            input.addEventListener('focus', function () {
                const errorDiv = document.querySelector('.alert.alert-danger');
                if (errorDiv) {
                    errorDiv.innerHTML = '';
                }
            });
        });
    </script>

    @section Scripts {
        @{
            await Html.RenderPartialAsync("_ValidationScriptsPartial");
        }
        <script>
            $(document).ready(function () {
                // Bắt sự kiện submit của form có id 'login-form'
                $('#login-form').on('submit', function () {
                    // Kiểm tra xem form có hợp lệ (đã qua client-side validation) không
                    if ($(this).valid()) {
                        // Nếu hợp lệ, hiển thị loading overlay
                        $('#loading-overlay').css('display', 'flex');
                    }
                });
            });
        </script>
    }
</body>
</html>