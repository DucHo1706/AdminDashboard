<<<<<<< HEAD
﻿@model IEnumerable<AdminDashboard.Models.ChuyenXe>
@using AdminDashboard.Models
@using AdminDashboard.Models.TrangThai

=======
﻿﻿@* Vị trí: Views/ChuyenXe/Index.cshtml *@
@model IEnumerable<AdminDashboard.Models.ChuyenXe>
>>>>>>> master

@{
    ViewData["Title"] = "Danh sách Chuyến xe";
}


<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <style>
<<<<<<< HEAD
        html, body {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            min-height: 100vh;
        }

        body {
            background: url('https://images.unsplash.com/photo-1583417319070-4a69db38a482?ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&q=80&w=1740') no-repeat center center fixed;
            background-size: cover;
            background-attachment: fixed;
            background-position: center;
            font-family: 'Segoe UI', Roboto, sans-serif;
            overflow-x: hidden; /* tránh tràn ngang */
        }

        h1 {
            text-align: center;
=======
        h1 {
            text-align: center;
            margin-top: 1em;
>>>>>>> master
            font-size: 2.5em;
            font-weight: 700;
            color: #111827;
            text-transform: uppercase;
            margin-bottom: 0.5em;
        }
<<<<<<< HEAD

=======
>>>>>>> master
        p {
            text-align: center;
        }

<<<<<<< HEAD
        .btn_add {
            font-weight: bold;
=======
        button {
            position: relative;
>>>>>>> master
            display: inline-block;
            margin: 15px;
            padding: 15px 30px;
            text-align: center;
            font-size: 18px;
            letter-spacing: 1px;
            text-decoration: none;
<<<<<<< HEAD
            color: whitesmoke;
            background: transparent;
            cursor: pointer;
            transition: ease-out 0.5s;
            border: 2px solid white;
            border-radius: 10px;
            box-shadow: inset 0 0 0 0 white;
        }

            .btn_add:hover {
                color: orangered;
                box-shadow: inset 0 -100px 0 0 moccasin;
            }

            .btn_add:active {
                transform: scale(0.9);
            }

        hr {
            max-width: 900px;
            height: 3px;
            background-color: aqua;
            border: none;
            border-radius: 3px;
            margin: 0 auto 80px;
        }

        /* --- Bảng dữ liệu (Table) --- */
        table {
            text-align: center;
            width: 90%;
            margin: 20px auto;
            border-collapse: collapse;
            border-radius: 12px;
            overflow: hidden;
            font-size: 0.9em;
            color: #333;
            background: rgb(255,165,0);
            backdrop-filter: blur(6px);
            -webkit-backdrop-filter: blur(6px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.25);
        }

        /* --- Phần tiêu đề bảng --- */
        .modern-table thead th {
            padding: 15px;
            color: rgb(0, 0, 139);
            font-weight: bold;
            text-transform: uppercase;
            font-size: 13px;
            text-align: center;
            border-bottom: 2px solid rgba(255, 255, 255, 0.3);
            background: rgba(255, 255, 255, 0.25);
        }

        .modern-table tbody td {
            padding: 15px;
            vertical-align: middle;
            color: #222;
            font-weight: 500;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
        }

        .modern-table tbody tr {
            transition: background-color 0.25s ease;
        }

            .modern-table tbody tr:hover {
                background-color: rgba(255, 255, 255, 0.2);
            }

        .badge {
            font-size: 12px;
            padding: 6px 10px;
            font-weight: 600;
            border-radius: 6px;
        }

        .bg-secondary-light {
            background-color: rgba(226, 227, 229, 0.8);
            color: #41464b;
        }

        .bg-success-light {
            background-color: rgba(209, 231, 221, 0.8);
            color: #0a3622;
        }

        .bg-warning-light {
            background-color: rgba(255, 243, 205, 0.8);
            color: #664d03;
        }

        .bg-info-light {
            background-color: rgba(207, 244, 252, 0.8);
            color: #055160;
        }

        .bg-danger-light {
            background-color: rgba(248, 215, 218, 0.8);
            color: #58151c;
        }

        .bg-primary-light {
            background-color: rgba(207, 226, 255, 0.8);
            color: #0a2351;
        }
    </style>
</head>
<body>
    <h1 class="text-white">@ViewData["Title"]</h1>

    <hr />

    @if (TempData["SuccessMessage"] != null)
    {
        <div class="alert alert-success alert-dismissible fade show d-flex align-items-center justify-content-between mx-auto"
             role="alert"
             style="font-weight:600; width: 70%; text-align:left;">
            <span>@TempData["SuccessMessage"]</span>
            <button type="button" class="btn-close ms-3" data-bs-dismiss="alert" aria-label="Đóng"></button>
        </div>
    }
    @if (TempData["ErrorMessage"] != null)
    {
        <div class="alert alert-danger alert-dismissible fade show d-flex align-items-center justify-content-between mx-auto"
             role="alert"
             style="font-weight:600; width: 70%; text-align:left;">
            <span>@TempData["ErrorMessage"]</span>
            <button type="button" class="btn-close ms-3" data-bs-dismiss="alert" aria-label="Đóng"></button>
        </div>
    }

    <table class="table modern-table table-hover">
        <thead>
            <tr class="table">
=======
            color: #FF6600;
            background: transparent;
            cursor: pointer;
            transition: ease-out 0.5s;
            border: 2px solid #FF6600;
            border-radius: 10px;
            box-shadow: inset 0 0 0 0 #FF6600;
        }

            button:hover {
                color: white;
                box-shadow: inset 0 -100px 0 0 #725AC1;
            }

            button:active {
                transform: scale(0.9);
            }

    </style>
</head>
<body>
    <h1>@ViewData["Title"]</h1>

    <table class="table table-bordered table-hover">
        <thead>
            <tr class="table-primary">
>>>>>>> master
                <th>Lộ Trình</th>
                <th>Biển Số Xe</th>
                <th>Ngày Đi</th>
                <th>Giờ Đi</th>
                <th>Trạng Thái</th>
                <th></th>
            </tr>
        </thead>
        <tbody>
            @foreach (var item in Model)
            {
                <tr>
<<<<<<< HEAD
                    <td class="fw-bold">
                        @(item.LoTrinh?.TramDiNavigation?.TenTram)
                        <i class="bi bi-arrow-right mx-1 text-muted"></i> @(item.LoTrinh?.TramToiNavigation?.TenTram)
                    </td>
                    <td>
                        <span class="badge bg-secondary-light">
                            @Html.DisplayFor(modelItem => item.Xe.BienSoXe)
                        </span>
=======
                    <td>
                        @(item.LoTrinh?.TramDiNavigation?.TenTram) -> @(item.LoTrinh?.TramToiNavigation?.TenTram)
                    </td>
                    <td>
                        @Html.DisplayFor(modelItem => item.Xe.BienSoXe)
>>>>>>> master
                    </td>
                    <td>
                        @item.NgayDi.ToString("dd/MM/yyyy")
                    </td>
                    <td>
                        @item.GioDi.ToString(@"hh\:mm")
                    </td>
                    <td>
<<<<<<< HEAD
                           @if (item.TrangThai == TrangThaiChuyenXe.DaLenLich)
                        {
                            <form asp-action="MoBanVe" asp-route-id="@item.ChuyenId" method="post" onsubmit="return confirm('Bạn có chắc muốn mở bán vé cho chuyến xe này?');">
                            <button type="submit" class="btn btn-success btn-sm">
                                <i class="fas fa-ticket-alt"></i> Mở Bán Vé
                            </button>
                            </form>
                            <span class="badge bg-success-light">Đã Lên Lịch</span>
                        }
                        @if (item.TrangThai == TrangThaiChuyenXe.DangMoBanVe)
                        {
                            <span class="badge bg-success-light">Đang Mở Bán Vé</span>
                        }
                        @if (item.TrangThai == TrangThaiChuyenXe.DaHoanThanh)
                        {
                            <span class="badge bg-success-light">Đã Hoàn Thành </span>
                        }
                        
                        @if (item.TrangThai == TrangThaiChuyenXe.DangDiChuyen)
                        {
                            <span class="badge bg-warning-light">Đang Di Chuyển</span>
                        }
                        @if (item.TrangThai == TrangThaiChuyenXe.DaHuy)
                        {
                            <span class="badge bg-danger-light">Đã Hủy</span>
                        }
                        @if (item.TrangThai == TrangThaiChuyenXe.ChoKhoiHanh)
                        {
                            <span class="badge bg-info-light">Chờ Khởi Hành</span>
                        }
                       
                    </td>
                    <td>
                        <a asp-action="Edit" asp-route-id="@item.ChuyenId" class="btn btn-sm btn-outline-success">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-pencil-square" viewBox="0 0 16 16">
                                <path d="M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z" />
                                <path fill-rule="evenodd" d="M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5z" />
                            </svg>
                        </a> |
                        <a asp-action="Details" asp-route-id="@item.ChuyenId" class="btn btn-sm btn-outline-info">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-card-text" viewBox="0 0 16 16">
                                <path d="M14.5 3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-13a.5.5 0 0 1-.5-.5v-9a.5.5 0 0 1 .5-.5zm-13-1A1.5 1.5 0 0 0 0 3.5v9A1.5 1.5 0 0 0 1.5 14h13a1.5 1.5 0 0 0 1.5-1.5v-9A1.5 1.5 0 0 0 14.5 2z" />
                                <path d="M3 5.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5M3 8a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9A.5.5 0 0 1 3 8m0 2.5a.5.5 0 0 1 .5-.5h6a.5.5 0 0 1 0 1h-6a.5.5 0 0 1-.5-.5" />
                            </svg>
                        </a> |
                        <button type="button"
                                class="btn btn-sm btn-outline-danger"
                                data-bs-toggle="modal"
                                data-bs-target="#deleteModal"
                                data-id="@item.ChuyenId"
                                data-lotrinh="@(item.LoTrinh?.TramDiNavigation?.TenTram + " -> " + item.LoTrinh?.TramToiNavigation?.TenTram)"
                                data-xe="@item.Xe?.BienSoXe"
                                data-ngaydi="@item.NgayDi.ToString("dd/MM/yyyy")">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-trash3" viewBox="0 0 16 16">
                                <path d="M6.5 1h3a.5.5 0 0 1 .5.5v1H6v-1a.5.5 0 0 1 .5-.5M11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3A1.5 1.5 0 0 0 5 1.5v1H1.5a.5.5 0 0 0 0 1h.538l.853 10.66A2 2 0 0 0 4.885 16h6.23a2 2 0 0 0 1.994-1.84l.853-10.66h.538a.5.5 0 0 0 0-1zm1.958 1-.846 10.58a1 1 0 0 1-.997.92h-6.23a1 1 0 0 1-.997-.92L3.042 3.5zm-7.487 1a.5.5 0 0 1 .528.47l.5 8.5a.5.5 0 0 1-.998.06L5 5.03a.5.5 0 0 1 .47-.53Zm5.058 0a.5.5 0 0 1 .47.53l-.5 8.5a.5.5 0 1 1-.998-.06l.5-8.5a.5.5 0 0 1 .528-.47M8 4.5a.5.5 0 0 1 .5.5v8.5a.5.5 0 0 1-1 0V5a.5.5 0 0 1 .5-.5" />
                            </svg>
                        </button>

=======
                        @Html.DisplayFor(modelItem => item.TrangThai)
                    </td>
                    <td>
                        <a asp-action="Edit" asp-route-id="@item.ChuyenId" class="btn btn-sm btn-outline-success">Sửa</a> |
                        <a asp-action="Details" asp-route-id="@item.ChuyenId" class="btn btn-sm btn-outline-info">Chi tiết</a> |
                        <a asp-action="Delete" asp-route-id="@item.ChuyenId" class="btn btn-sm btn-outline-danger">Xóa</a>
>>>>>>> master
                    </td>
                </tr>
            }
        </tbody>
    </table>
    <p>
<<<<<<< HEAD
        <a asp-action="Create" class="btn_add">
            Thêm chuyến xe mới
        </a>
    </p>
    <!-- Modal Xóa -->
    <div class="modal fade" id="deleteModal" tabindex="-1" aria-labelledby="deleteModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <form asp-action="Delete" method="post">
                    <div class="modal-header bg-danger text-white">
                        <h5 class="modal-title" id="deleteModalLabel">Xác nhận Xóa</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Đóng"></button>
                    </div>

                    <div class="modal-body">
                        <input type="hidden" id="deleteChuyenId" name="ChuyenId" />

                        <dl class="row">
                            <dt class="col-sm-4">Lộ Trình</dt>
                            <dd class="col-sm-8" id="deleteLoTrinh"></dd>

                            <dt class="col-sm-4">Xe</dt>
                            <dd class="col-sm-8" id="deleteXe"></dd>

                            <dt class="col-sm-4">Ngày Đi</dt>
                            <dd class="col-sm-8" id="deleteNgayDi"></dd>
                        </dl>

                        <p class="text-danger mt-3">Bạn có chắc chắn muốn xóa chuyến xe này không?</p>
                    </div>

                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Hủy</button>
                        <button type="submit" class="btn btn-danger">Xóa</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    @section Scripts {
        <script>
            const deleteModal = document.getElementById('deleteModal');
            deleteModal.addEventListener('show.bs.modal', function (event) {
                const button = event.relatedTarget;

                const id = button.getAttribute('data-id');
                const lotrinh = button.getAttribute('data-lotrinh');
                const xe = button.getAttribute('data-xe');
                const ngaydi = button.getAttribute('data-ngaydi');

                deleteModal.querySelector('#deleteChuyenId').value = id;
                deleteModal.querySelector('#deleteLoTrinh').textContent = lotrinh;
                deleteModal.querySelector('#deleteXe').textContent = xe;
                deleteModal.querySelector('#deleteNgayDi').textContent = ngaydi;
            });

            setTimeout(() => {
                const alerts = document.querySelectorAll('.alert');
                alerts.forEach(alert => {
                    const bsAlert = new bootstrap.Alert(alert);
                    bsAlert.close();
                });
            }, 1500);
        </script>
    }
=======
        <a asp-action="Create">
            <button>Thêm chuyến xe mới</button>
        </a>
    </p>
>>>>>>> master
</body>